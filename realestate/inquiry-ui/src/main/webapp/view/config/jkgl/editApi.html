<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title class="bdc_subsystem">新增接口</title>
    <meta content="webkit" name="renderer">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <link rel="stylesheet" href="../../../static/lib/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../../static/js/config/thirdControl/layui/formSelects/formSelects-v4.css"/>
    <link rel="stylesheet" href="../../../static/lib/bdcui/css/search.css"/>
    <link rel="stylesheet" href="../../../static/lib/bdcui/css/table.css"/>
    <link rel="stylesheet" href="../../../static/lib/bdcui/css/form.css"/>
    <link rel="stylesheet" href="../../../static/lib/bdcui/css/mask.css"/>
    <link rel="stylesheet" href="../../../static/lib/registerui/css/percentage-layout.css"/>
    <link rel="stylesheet" href="../../../static/lib/bdcui/css/popup.css"/>
    <link rel="stylesheet" href="../../../static/css/config/jkgl/apiCommon.css">
    <style type="text/css">
        .api-return .layui-table-cell {overflow: hidden !important;}
        .return-tip {
            padding-left: 26px;
            padding-top: 10px;
            color: #b4b4b4;
            font-family: auto;
            font-size: 14px;
        }
    </style>

</head>
<body>
<div class="bdc-form-div bdc-not-full-bg">
    <form class="layui-form bdc-form-table" lay-filter="apiForm">

        <div class="form-margin-area">
            <div class="basic-info">
                <div class="title-sign">
                    <p>基本信息</p>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">接口消费方</label>
                        <div class="layui-input-inline ">
                            <select name="consumer" id="consumer" xm-select="consumer" xm-select-skin="default" xm-select-show-count="2" xm-select-search="" xm-select-height="34px" xm-select-search-type="dl"></select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width"><span
                                class="required-span"><sub>*</sub></span>是否记录日志</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="logFlag" id="logFlag" lay-verify="required">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width"><span
                                class="required-span"><sub>*</sub></span>日志记录方式</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="logType" id="logType" lay-verify="required">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width"><span
                                class="required-span"><sub>*</sub></span>接口类型</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="type" id="type" lay-verify="required">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width"><span
                                class="required-span"><sub>*</sub></span>接口名称</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" id="name" name="name" type="text" lay-verify="required">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width"><span
                                class="required-span"><sub>*</sub></span>请求方式</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="requestMethod" id="requestMethod" lay-verify="required">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width">发布状态</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="releaseStatus" id="releaseStatus" disabled>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width">接口地址代码</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" id="codeUrl" name="codeUrl" type="text" lay-verify="codeUrl">
                        </div>
                    </div>
                    <div class="layui-inline bdc-two-column" id="url_div">
                        <label class="layui-form-label change-label-width">接口地址</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" id="url" name="url" placeholder="不可编辑，保存成功后自动生成" type="text">
                        </div>
                    </div>
<!--                    <div class="layui-inline">-->
<!--                        <label class="layui-form-label change-label-width bdc-label-newline">-->
<!--                            <span class="required-span"><sub>*</sub></span>是否返回成  功失败标识</label>-->
<!--                        <div class="layui-input-inline bdc-radio">-->
<!--                            <select name="packageResponse" id="packageResponse" lay-verify="required">-->
<!--                            </select>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width bdc-label-newline">
                            <span class="required-span"></span>是否返回响应头</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="packageResponseHead" id="packageResponseHead" lay-filter="packageResponseHead" lay-verify="required">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width bdc-label-newline">
                            <span class="required-span"></span>是否返回响应情况</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="packageResponseDetail" id="packageResponseDetail" lay-filter="packageResponseDetail" lay-verify="required">
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label change-label-width bdc-label-newline">
                            <span class="required-span"></span>返回结果是否List</label>
                        <div class="layui-input-inline bdc-radio">
                            <select name="dataIsList" id="dataIsList" lay-filter="dataIsList" lay-verify="required">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item change-textarea-margin">
                    <label class="layui-form-label change-label-width"><span class="required-span"><sub>*</sub></span>配置SQL</label>
                    <div class="layui-input-inline textarea_div bdc-fj-inline">
                         <textarea class="layui-textarea change-textarea-width big-textarea" id="sql" name="sql" lay-verify="checkSql"
                                   placeholder="数据源为sql,只需配置一条sql，当语句查询出的结果过多且配置了嵌套参数时务必加上rownum取前10的配置，防止循环查表对系统影响"></textarea>
                        <div class="bdc-pj-popup">
                            弹窗显示
                            <img src="../../../static/image/fj-more.png" alt="">
                        </div>
                    </div>
                </div>
                <div class="layui-form-item change-textarea-margin">
                    <label class="layui-form-label change-label-width">接口描述</label>
                    <div class="layui-input-inline textarea_div">
                        <textarea class="layui-textarea change-textarea-width" id="description" name="description"></textarea>
                    </div>
                </div>
                <div id="responseSettingDiv" class="layui-form-item change-textarea-margin">
                    <label class="layui-form-label change-label-width">响应头设置</label>
                    <div class="layui-input-inline">
                        <div class="layui-form-item api-return">
                            <div class="layui-row return-content">
                                <div class="bdc-table-box">
                                    <table id="responseHead" lay-filter="responseHead"></table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="responseDetailSettingDiv" class="layui-form-item change-textarea-margin">
                    <label class="layui-form-label change-label-width">响应详情设置</label>
                    <div class="layui-input-inline">
                        <div class="layui-form-item api-return">
                            <div class="layui-row return-content">
                                <div class="bdc-table-box">
                                    <table id="responseDetail" lay-filter="responseDetail"></table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="basic-info param">
                <div class="title-sign">
                    <p>请求参数</p>
                </div>
                <div class="layui-form-item">
                    <div class="layui-tab" lay-filter="param_tab">
                        <ul class="layui-tab-title">
                            <li class="layui-this">请求体</li>
                            <li>Query参数</li>
                            <li>Rest参数</li>
                        </ul>
                        <div class="layui-tab-content">
                            <div class="bdc-table-box">
                                <table id="paramTable" lay-filter="paramTable"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="basic-info response">
                <div class="title-sign">
                    <p>响应内容</p>
                </div>
                <p class="return-tip">参数转换字典项配置配置样例: qllx(字典名称),dmzmc(代码转名称，如果是名称转代码则为mczdm) 当存在字段拼接时配置样例: qllx(数据库字段名),qllx,dmzmc;;qlxz,qlxz,dmzmc
                    <br/>字段拼接样例: #{qlxz} / #{qllx} ps:参数用#{}包裹，中间可以是诸如/ === 等字符串</p>
                <div class="layui-form-item api-return">
                    <div class="layui-row return-content">
                        <div class="bdc-table-box">
                            <table id="returnTable" lay-filter="returnTable"></table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="basic-info response">
                <div class="title-sign">
                    <p>响应体默认参数</p>
                </div>
                <div class="layui-form-item api-return">
                    <div class="layui-row return-content">
                        <div class="bdc-table-box">
                            <table id="returnDeafultParamTable" lay-filter="returnDeafultParamTable"></table>
                        </div>
                    </div>
                </div>
            </div>
            <div id="operate" class="operate">
                <div class="layui-inline bdc-frame-button-box">
                    <a href="javascript:;" id="test" class="layui-btn layui-btn-normal bdc-major-btn" lay-submit=""
                       lay-filter="test">测试</a>
                    <a href="javascript:;" id="save" class="layui-btn layui-btn-normal bdc-major-btn" lay-submit=""
                       lay-filter="save">保存</a>
                </div>
            </div>
        </div>
    </form>
</div>
<input hidden id="parentTableIndex" />
<!--配置sql 弹出层-->
<div id="fjPopup" class="bdc-hide">
    <form class="layui-form" action="">
        <textarea id="desc" name="desc" placeholder="数据源为sql,只需配置一条sql，当语句查询出的结果过多且配置了嵌套参数时务必加上rownum取前10的配置，防止循环查表对系统影响" class="layui-textarea"></textarea>
    </form>
</div>

<!--配置sql 弹出层-->
<div id="aloneSql" class="bdc-hide">
    <form class="layui-form" action="">
        <textarea name="desc" placeholder="只支持配置一条sql" class="layui-textarea"></textarea>
    </form>
</div>

<!--表格上面功能按钮-->
<script type="text/html" id="toolbar">
    <div class="layui-btn-container">
        <button type="button" class="layui-btn layui-btn-sm bdc-major-btn" lay-event="addParam">新增</button>
    </div>
</script>

<script type="text/html" id="fieldTypeRequestParamTel">
    <div class="layui-input-inline" id="requestParam_select_fieldType">
        <select id="requestParam_fieldType" name="requestParam_fieldType" lay-filter="requestParam_fieldType">
            <option value="java.lang.String">String</option>
            <option value="java.lang.Integer">Integer</option>
            <option value="java.lang.Boolean">Boolean</option>
            <option value="java.lang.Double">Double</option>
            <option value="java.util.Date">Date</option>
            <option value="java.util.List">List</option>
        </select>
    </div>
</script>

<script type="text/html" id="fieldTypeReturnParamTel">
    <div class="layui-input-inline" id="return_select_fieldType">
        <select id="return_fieldType" name="return_fieldType" lay-filter="return_fieldType">
            <option value="java.lang.String">String</option>
            <option value="java.lang.Integer">Integer</option>
            <option value="java.lang.Boolean">Boolean</option>
            <option value="java.lang.Double">Double</option>
            <option value="java.util.Date">Date</option>
            <option value="java.util.List">List</option>
        </select>
    </div>
</script>

<script type="text/html" id="switchHtml">
    <div class="layui-input-inline" id="switchDiv">
        <select id="switchId" name="switchName" lay-filter="switchFilter">
            <option value="1">是</option>
            <option value="0">否</option>
        </select>
    </div>
</script>
<!--$(".layui-table-box").find("[data-field='sql']").attr('data-edit',true);-->
<script type="text/html" id="switchIsListFlag">
    <input type="checkbox" class="switchIsListFlagCheckbox" id="isList" name="isList" lay-skin="switch" lay-text="是|否" lay-filter="switchIsListFlagFilter">
</script>


<script type="text/html" id="requiredTel">
    <div class="layui-input-inline" id="table_select_required">
        <select id="required" name="required" lay-filter="required">
            <option value="0">是</option>
            <option value="1">否</option>
        </select>
    </div>
</script>

<script src = "../../../static/lib/jquery/jquery.min.js" ></script>
<script src="../../../static/lib/layui/layui.js"></script>
<!--添加水印-->
<script src="../../../static/lib/bdcui/js/common.js"></script>
<script src="../../../static/js/config/common.js"></script>
<!--<script src="../../../static/thirdControl/layui/formSelects/formSelects-v4.min.js"></script>-->
<script src="../../../static/js/config/jkgl/editApi.js"></script>
</body>
</html>